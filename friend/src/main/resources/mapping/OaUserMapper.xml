<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.straw.friend.dao.OaUserMapper" >
  <resultMap id="BaseResultMap" type="com.straw.friend.bean.OaUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
    <result column="directory_id" property="directoryId" jdbcType="VARCHAR" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
    <result column="real_name" property="realName" jdbcType="VARCHAR" />
    <result column="email_" property="email" jdbcType="VARCHAR" />
    <result column="list_order" property="listOrder" jdbcType="INTEGER" />
    <result column="pwd_format" property="pwdFormat" jdbcType="VARCHAR" />
    <result column="password_" property="password" jdbcType="VARCHAR" />
    <result column="approved_" property="approved" jdbcType="BIT" />
    <result column="locked_out" property="lockedOut" jdbcType="BIT" />
    <result column="last_lockout_date" property="lastLockoutDate" jdbcType="DATE" />
    <result column="question_" property="question" jdbcType="VARCHAR" />
    <result column="answer_" property="answer" jdbcType="VARCHAR" />
    <result column="failed_answer_date" property="failedAnswerDate" jdbcType="DATE" />
    <result column="failed_answer_count" property="failedAnswerCount" jdbcType="INTEGER" />
    <result column="failed_date" property="failedDate" jdbcType="DATE" />
    <result column="failed_count" property="failedCount" jdbcType="INTEGER" />
    <result column="last_login_date" property="lastLoginDate" jdbcType="DATE" />
    <result column="last_pwd_change" property="lastPwdChange" jdbcType="DATE" />
    <result column="create_date" property="createDate" jdbcType="DATE" />
    <result column="Salt" property="salt" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, user_id, directory_id, user_name, real_name, email_, list_order, pwd_format, 
    password_, approved_, locked_out, last_lockout_date, question_, answer_, failed_answer_date, 
    failed_answer_count, failed_date, failed_count, last_login_date, last_pwd_change, 
    create_date, Salt
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from oa_user
    where id = #{id,jdbcType=VARCHAR}
  </select>
  
  <!-- 根据用户名查找用户 -->
   <select id="findByUsername" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from oa_user
    where userName = #{username,jdbcType=VARCHAR}
  </select>
  <!-- 得到用户的角色 -->
  <select id="findRoles" resultMap="java.util.List" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    b.id
    from oa_user a,oa_role b,oa_user_role c
    where  a.id =c.user_id and c.role_id = b.id and a.userName = #{username,jdbcType=VARCHAR}
  </select>
  
  <select id="findPermissions" resultMap="java.util.List" parameterType="java.lang.String" >
   SELECT d.id from oa_user_role a,oa_role_resource b,oa_role_resource_privilege c,oa_user d
	where a.role_id = b.role_id and b.id = c.role_resource_id and a.user_id = d.id
	and d.userName = #{username,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from oa_user
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.straw.friend.bean.OaUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into oa_user (id, user_id, directory_id, 
      user_name, real_name, email_, 
      list_order, pwd_format, password_, 
      approved_, locked_out, last_lockout_date, 
      question_, answer_, failed_answer_date, 
      failed_answer_count, failed_date, failed_count, 
      last_login_date, last_pwd_change, create_date, 
      Salt)
    values (#{id,jdbcType=VARCHAR}, #{userId,jdbcType=VARCHAR}, #{directoryId,jdbcType=VARCHAR}, 
      #{userName,jdbcType=VARCHAR}, #{realName,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, 
      #{listOrder,jdbcType=INTEGER}, #{pwdFormat,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{approved,jdbcType=BIT}, #{lockedOut,jdbcType=BIT}, #{lastLockoutDate,jdbcType=DATE}, 
      #{question,jdbcType=VARCHAR}, #{answer,jdbcType=VARCHAR}, #{failedAnswerDate,jdbcType=DATE}, 
      #{failedAnswerCount,jdbcType=INTEGER}, #{failedDate,jdbcType=DATE}, #{failedCount,jdbcType=INTEGER}, 
      #{lastLoginDate,jdbcType=DATE}, #{lastPwdChange,jdbcType=DATE}, #{createDate,jdbcType=DATE}, 
      #{salt,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.straw.friend.bean.OaUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into oa_user
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="directoryId != null" >
        directory_id,
      </if>
      <if test="userName != null" >
        user_name,
      </if>
      <if test="realName != null" >
        real_name,
      </if>
      <if test="email != null" >
        email_,
      </if>
      <if test="listOrder != null" >
        list_order,
      </if>
      <if test="pwdFormat != null" >
        pwd_format,
      </if>
      <if test="password != null" >
        password_,
      </if>
      <if test="approved != null" >
        approved_,
      </if>
      <if test="lockedOut != null" >
        locked_out,
      </if>
      <if test="lastLockoutDate != null" >
        last_lockout_date,
      </if>
      <if test="question != null" >
        question_,
      </if>
      <if test="answer != null" >
        answer_,
      </if>
      <if test="failedAnswerDate != null" >
        failed_answer_date,
      </if>
      <if test="failedAnswerCount != null" >
        failed_answer_count,
      </if>
      <if test="failedDate != null" >
        failed_date,
      </if>
      <if test="failedCount != null" >
        failed_count,
      </if>
      <if test="lastLoginDate != null" >
        last_login_date,
      </if>
      <if test="lastPwdChange != null" >
        last_pwd_change,
      </if>
      <if test="createDate != null" >
        create_date,
      </if>
      <if test="salt != null" >
        Salt,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="directoryId != null" >
        #{directoryId,jdbcType=VARCHAR},
      </if>
      <if test="userName != null" >
        #{userName,jdbcType=VARCHAR},
      </if>
      <if test="realName != null" >
        #{realName,jdbcType=VARCHAR},
      </if>
      <if test="email != null" >
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="listOrder != null" >
        #{listOrder,jdbcType=INTEGER},
      </if>
      <if test="pwdFormat != null" >
        #{pwdFormat,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="approved != null" >
        #{approved,jdbcType=BIT},
      </if>
      <if test="lockedOut != null" >
        #{lockedOut,jdbcType=BIT},
      </if>
      <if test="lastLockoutDate != null" >
        #{lastLockoutDate,jdbcType=DATE},
      </if>
      <if test="question != null" >
        #{question,jdbcType=VARCHAR},
      </if>
      <if test="answer != null" >
        #{answer,jdbcType=VARCHAR},
      </if>
      <if test="failedAnswerDate != null" >
        #{failedAnswerDate,jdbcType=DATE},
      </if>
      <if test="failedAnswerCount != null" >
        #{failedAnswerCount,jdbcType=INTEGER},
      </if>
      <if test="failedDate != null" >
        #{failedDate,jdbcType=DATE},
      </if>
      <if test="failedCount != null" >
        #{failedCount,jdbcType=INTEGER},
      </if>
      <if test="lastLoginDate != null" >
        #{lastLoginDate,jdbcType=DATE},
      </if>
      <if test="lastPwdChange != null" >
        #{lastPwdChange,jdbcType=DATE},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=DATE},
      </if>
      <if test="salt != null" >
        #{salt,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.straw.friend.bean.OaUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update oa_user
    <set >
      <if test="userId != null" >
        user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="directoryId != null" >
        directory_id = #{directoryId,jdbcType=VARCHAR},
      </if>
      <if test="userName != null" >
        user_name = #{userName,jdbcType=VARCHAR},
      </if>
      <if test="realName != null" >
        real_name = #{realName,jdbcType=VARCHAR},
      </if>
      <if test="email != null" >
        email_ = #{email,jdbcType=VARCHAR},
      </if>
      <if test="listOrder != null" >
        list_order = #{listOrder,jdbcType=INTEGER},
      </if>
      <if test="pwdFormat != null" >
        pwd_format = #{pwdFormat,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        password_ = #{password,jdbcType=VARCHAR},
      </if>
      <if test="approved != null" >
        approved_ = #{approved,jdbcType=BIT},
      </if>
      <if test="lockedOut != null" >
        locked_out = #{lockedOut,jdbcType=BIT},
      </if>
      <if test="lastLockoutDate != null" >
        last_lockout_date = #{lastLockoutDate,jdbcType=DATE},
      </if>
      <if test="question != null" >
        question_ = #{question,jdbcType=VARCHAR},
      </if>
      <if test="answer != null" >
        answer_ = #{answer,jdbcType=VARCHAR},
      </if>
      <if test="failedAnswerDate != null" >
        failed_answer_date = #{failedAnswerDate,jdbcType=DATE},
      </if>
      <if test="failedAnswerCount != null" >
        failed_answer_count = #{failedAnswerCount,jdbcType=INTEGER},
      </if>
      <if test="failedDate != null" >
        failed_date = #{failedDate,jdbcType=DATE},
      </if>
      <if test="failedCount != null" >
        failed_count = #{failedCount,jdbcType=INTEGER},
      </if>
      <if test="lastLoginDate != null" >
        last_login_date = #{lastLoginDate,jdbcType=DATE},
      </if>
      <if test="lastPwdChange != null" >
        last_pwd_change = #{lastPwdChange,jdbcType=DATE},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=DATE},
      </if>
      <if test="salt != null" >
        Salt = #{salt,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.straw.friend.bean.OaUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update oa_user
    set user_id = #{userId,jdbcType=VARCHAR},
      directory_id = #{directoryId,jdbcType=VARCHAR},
      user_name = #{userName,jdbcType=VARCHAR},
      real_name = #{realName,jdbcType=VARCHAR},
      email_ = #{email,jdbcType=VARCHAR},
      list_order = #{listOrder,jdbcType=INTEGER},
      pwd_format = #{pwdFormat,jdbcType=VARCHAR},
      password_ = #{password,jdbcType=VARCHAR},
      approved_ = #{approved,jdbcType=BIT},
      locked_out = #{lockedOut,jdbcType=BIT},
      last_lockout_date = #{lastLockoutDate,jdbcType=DATE},
      question_ = #{question,jdbcType=VARCHAR},
      answer_ = #{answer,jdbcType=VARCHAR},
      failed_answer_date = #{failedAnswerDate,jdbcType=DATE},
      failed_answer_count = #{failedAnswerCount,jdbcType=INTEGER},
      failed_date = #{failedDate,jdbcType=DATE},
      failed_count = #{failedCount,jdbcType=INTEGER},
      last_login_date = #{lastLoginDate,jdbcType=DATE},
      last_pwd_change = #{lastPwdChange,jdbcType=DATE},
      create_date = #{createDate,jdbcType=DATE},
      Salt = #{salt,jdbcType=VARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
</mapper>